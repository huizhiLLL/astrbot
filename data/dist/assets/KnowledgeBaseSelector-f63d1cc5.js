import{u as se,z as _,c as ue,ao as J,o as t,g as d,A as C,F as T,h as j,a as f,w as e,e as s,t as v,k as E,p as b,b as l,C as p,M as F,N as q,P as B,B as X,V as A,l as w,d as N,$ as O,ar as ee,f as oe,a1 as M,L as R,a2 as Y,G,H,al as ie,am as le,aJ as de,ad as ce,T as ae,q as W,a0 as ne,a5 as te,aU as re}from"./index-77b120c5.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{P as me}from"./PersonaForm-6a4b8a9f.js";const ve=o=>(G("data-v-c5f2f261"),o=o(),H(),o),fe={class:"d-flex align-center justify-space-between"},ye={key:0,style:{color:"rgb(var(--v-theme-primaryText))"}},pe={key:1,class:"d-flex flex-wrap ga-2"},_e={key:0,class:"d-flex"},ge={key:1,class:"d-flex"},Ve={key:1,class:"text-center py-8"},he=ve(()=>C("p",{class:"text-grey mt-4"},"æš‚æ— é¡¹ç›®",-1)),ke={class:"d-flex align-center ga-2"},xe={__name:"ListConfigItem",props:{modelValue:{type:Array,default:()=>[]},label:{type:String,default:""},buttonText:{type:String,default:"ä¿®æ”¹"},dialogTitle:{type:String,default:"ä¿®æ”¹åˆ—è¡¨é¡¹"},maxDisplayItems:{type:Number,default:1}},emits:["update:modelValue"],setup(o,{emit:z}){const y=o,{t:g}=se(),u=_(!1),m=_([]),r=_([]),c=_(""),$=_(-1),k=_(""),D=ue(()=>y.modelValue.slice(0,y.maxDisplayItems));J(()=>y.modelValue,S=>{m.value=[...S||[]]},{immediate:!0});function U(){m.value=[...y.modelValue||[]],r.value=[...y.modelValue||[]],u.value=!0,$.value=-1,k.value="",c.value=""}function x(){c.value.trim()!==""&&(m.value.push(c.value.trim()),c.value="")}function P(S){m.value.splice(S,1)}function V(S,h){$.value=S,k.value=h}function K(){k.value.trim()!==""&&(m.value[$.value]=k.value.trim(),n())}function n(){$.value=-1,k.value=""}function i(){z("update:modelValue",[...m.value]),u.value=!1}function a(){m.value=[...r.value],$.value=-1,k.value="",c.value="",u.value=!1}return(S,h)=>(t(),d(T,null,[C("div",fe,[C("div",null,[!o.modelValue||o.modelValue.length===0?(t(),d("span",ye," æš‚æ— é¡¹ç›® ")):(t(),d("div",pe,[(t(!0),d(T,null,j(D.value,I=>(t(),f(E,{key:I,size:"x-small",label:"",color:"primary"},{default:e(()=>[s(v(I.length>20?I.slice(0,20)+"...":I),1)]),_:2},1024))),128)),o.modelValue.length>o.maxDisplayItems?(t(),f(E,{key:0,size:"x-small",label:"",color:"grey-lighten-1"},{default:e(()=>[s(" +"+v(o.modelValue.length-o.maxDisplayItems),1)]),_:1})):b("",!0)]))]),l(p,{size:"small",color:"primary",variant:"tonal",onClick:U},{default:e(()=>[s(v(o.buttonText),1)]),_:1})]),l(Y,{modelValue:u.value,"onUpdate:modelValue":h[2]||(h[2]=I=>u.value=I),"max-width":"600px"},{default:e(()=>[l(F,null,{default:e(()=>[l(q,{class:"text-h3 py-4",style:{"font-weight":"normal"}},{default:e(()=>[s(v(o.dialogTitle),1)]),_:1}),l(B,{class:"pa-0",style:{"max-height":"400px","overflow-y":"auto"}},{default:e(()=>[m.value.length>0?(t(),f(X,{key:0,density:"compact"},{default:e(()=>[(t(!0),d(T,null,j(m.value,(I,L)=>(t(),f(A,{key:L,rounded:"md",class:"ma-1"},{append:e(()=>[$.value!==L?(t(),d("div",_e,[l(p,{onClick:Z=>V(L,I),variant:"plain",icon:"",size:"small"},{default:e(()=>[l(w,null,{default:e(()=>[s("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),l(p,{onClick:Z=>P(L),variant:"plain",icon:"",size:"small"},{default:e(()=>[l(w,null,{default:e(()=>[s("mdi-close")]),_:1})]),_:2},1032,["onClick"])])):(t(),d("div",ge,[l(p,{onClick:K,variant:"plain",color:"success",icon:"",size:"small"},{default:e(()=>[l(w,null,{default:e(()=>[s("mdi-check")]),_:1})]),_:1}),l(p,{onClick:n,variant:"plain",color:"error",icon:"",size:"small"},{default:e(()=>[l(w,null,{default:e(()=>[s("mdi-close")]),_:1})]),_:1})]))]),default:e(()=>[$.value!==L?(t(),f(N,{key:0},{default:e(()=>[s(v(I),1)]),_:2},1024)):(t(),f(O,{key:1,modelValue:k.value,"onUpdate:modelValue":h[0]||(h[0]=Z=>k.value=Z),"hide-details":"",variant:"outlined",density:"compact",onKeyup:[ee(K,["enter"]),ee(n,["esc"])],autofocus:""},null,8,["modelValue","onKeyup"]))]),_:2},1024))),128))]),_:1})):(t(),d("div",Ve,[l(w,{size:"64",color:"grey-lighten-1"},{default:e(()=>[s("mdi-format-list-bulleted")]),_:1}),he]))]),_:1}),l(B,{class:"pa-4"},{default:e(()=>[C("div",ke,[l(O,{modelValue:c.value,"onUpdate:modelValue":h[1]||(h[1]=I=>c.value=I),label:oe(g)("core.common.list.addItemPlaceholder"),onKeyup:ee(x,["enter"]),clearable:"","hide-details":"",variant:"outlined",density:"compact",class:"flex-grow-1"},null,8,["modelValue","label","onKeyup"]),l(p,{onClick:x,variant:"tonal",color:"primary"},{default:e(()=>[l(w,null,{default:e(()=>[s("mdi-plus")]),_:1}),s(" "+v(oe(g)("core.common.list.addButton")),1)]),_:1})])]),_:1}),l(M,{class:"pa-4"},{default:e(()=>[l(R),l(p,{variant:"text",onClick:a},{default:e(()=>[s("å–æ¶ˆ")]),_:1}),l(p,{color:"primary",onClick:i},{default:e(()=>[s("ç¡®è®¤")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},dl=Q(xe,[["__scopeId","data-v-c5f2f261"]]);const be=o=>(G("data-v-7986fc87"),o=o(),H(),o),we={class:"d-flex align-center justify-space-between"},Ce={key:0,style:{color:"rgb(var(--v-theme-primaryText))"}},Se={key:1,class:"d-flex flex-wrap ga-2"},$e={key:0},Ie={key:1,class:"text-center py-8"},Te=be(()=>C("p",{class:"text-grey mt-4"},"æš‚æ— å‚æ•°",-1)),Pe={class:"d-flex align-center ga-2"},Ke={__name:"ObjectEditor",props:{modelValue:{type:Object,required:!0},buttonText:{type:String,default:"ä¿®æ”¹"},dialogTitle:{type:String,default:"ä¿®æ”¹é”®å€¼å¯¹"},maxDisplayItems:{type:Number,default:1}},emits:["update:modelValue"],setup(o,{emit:z}){const y=o;se();const g=_(!1),u=_([]),m=_([]),r=_(""),c=_("string"),$=ue(()=>Object.keys(y.modelValue).slice(0,y.maxDisplayItems));J(()=>y.modelValue,n=>{},{immediate:!0});function k(){u.value=[];for(const[n,i]of Object.entries(y.modelValue))u.value.push({key:n,value:i,type:typeof i})}function D(){k(),m.value=JSON.parse(JSON.stringify(u.value)),r.value="",c.value="string",g.value=!0}function U(){const n=r.value.trim();if(n!==""){if(u.value.some(S=>S.key===n)){alert("é”®åå·²å­˜åœ¨");return}let a;switch(c.value){case"number":a=0;break;case"boolean":a=!1;break;default:a="";break}u.value.push({key:n,value:a,type:c.value}),r.value=""}}function x(n){u.value.splice(n,1)}function P(n,i){const a=u.value[n].key;if(a===i)return;if(u.value.some((h,I)=>I!==n&&h.key===i)){alert("é”®åå·²å­˜åœ¨"),u.value[n].key=a;return}u.value[n].key=i}function V(){const n={};for(const i of u.value){let a=i.value;switch(i.type){case"number":a=Number(i.value);break;case"boolean":break;case"string":default:a=String(i.value);break}n[i.key]=a}z("update:modelValue",n),g.value=!1}function K(){u.value=JSON.parse(JSON.stringify(m.value)),g.value=!1}return(n,i)=>(t(),d(T,null,[C("div",we,[C("div",null,[!o.modelValue||Object.keys(o.modelValue).length===0?(t(),d("span",Ce," æš‚æ— é¡¹ç›® ")):(t(),d("div",Se,[(t(!0),d(T,null,j($.value,a=>(t(),f(E,{key:a,size:"x-small",label:"",color:"primary"},{default:e(()=>[s(v(a.length>20?a.slice(0,20)+"...":a),1)]),_:2},1024))),128)),Object.keys(o.modelValue).length>o.maxDisplayItems?(t(),f(E,{key:0,size:"x-small",label:"",color:"grey-lighten-1"},{default:e(()=>[s(" +"+v(Object.keys(o.modelValue).length-o.maxDisplayItems),1)]),_:1})):b("",!0)]))]),l(p,{size:"small",color:"primary",variant:"tonal",onClick:D},{default:e(()=>[s(v(o.buttonText),1)]),_:1})]),l(Y,{modelValue:g.value,"onUpdate:modelValue":i[2]||(i[2]=a=>g.value=a),"max-width":"600px"},{default:e(()=>[l(F,null,{default:e(()=>[l(q,{class:"text-h3 py-4",style:{"font-weight":"normal"}},{default:e(()=>[s(v(o.dialogTitle),1)]),_:1}),l(B,{class:"pa-4",style:{"max-height":"400px","overflow-y":"auto"}},{default:e(()=>[u.value.length>0?(t(),d("div",$e,[(t(!0),d(T,null,j(u.value,(a,S)=>(t(),d("div",{key:S,class:"key-value-pair"},[l(ie,{"no-gutters":"",align:"center",class:"mb-2"},{default:e(()=>[l(le,{cols:"4"},{default:e(()=>[l(O,{modelValue:a.key,"onUpdate:modelValue":h=>a.key=h,density:"compact",variant:"outlined","hide-details":"",placeholder:"é”®å",onBlur:h=>P(S,a.key)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024),l(le,{cols:"7",class:"pl-2 d-flex align-center justify-end"},{default:e(()=>[a.type==="string"?(t(),f(O,{key:0,modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,density:"compact",variant:"outlined","hide-details":"",placeholder:"å­—ç¬¦ä¸²å€¼"},null,8,["modelValue","onUpdate:modelValue"])):a.type==="number"?(t(),f(O,{key:1,modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,modelModifiers:{number:!0},type:"number",density:"compact",variant:"outlined","hide-details":"",placeholder:"æ•°å€¼"},null,8,["modelValue","onUpdate:modelValue"])):a.type==="boolean"?(t(),f(de,{key:2,modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,density:"compact","hide-details":"",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])):b("",!0)]),_:2},1024),l(le,{cols:"1",class:"pl-2"},{default:e(()=>[l(p,{icon:"",variant:"text",size:"small",color:"error",onClick:h=>x(S)},{default:e(()=>[l(w,null,{default:e(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])):(t(),d("div",Ie,[l(w,{size:"64",color:"grey-lighten-1"},{default:e(()=>[s("mdi-code-json")]),_:1}),Te]))]),_:1}),l(B,{class:"pa-4"},{default:e(()=>[C("div",Pe,[l(O,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=a=>r.value=a),label:"æ–°é”®å",density:"compact",variant:"outlined","hide-details":"",class:"flex-grow-1"},null,8,["modelValue"]),l(ce,{modelValue:c.value,"onUpdate:modelValue":i[1]||(i[1]=a=>c.value=a),items:["string","number","boolean"],label:"å€¼ç±»åž‹",density:"compact",variant:"outlined","hide-details":"",style:{"max-width":"120px"}},null,8,["modelValue"]),l(p,{onClick:U,variant:"tonal",color:"primary"},{default:e(()=>[l(w,null,{default:e(()=>[s("mdi-plus")]),_:1}),s(" æ·»åŠ  ")]),_:1})])]),_:1}),l(M,{class:"pa-4"},{default:e(()=>[l(R),l(p,{variant:"text",onClick:K},{default:e(()=>[s("å–æ¶ˆ")]),_:1}),l(p,{color:"primary",onClick:V},{default:e(()=>[s("ç¡®è®¤")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},cl=Q(Ke,[["__scopeId","data-v-7986fc87"]]);const ze=o=>(G("data-v-9f100c2b"),o=o(),H(),o),De={class:"d-flex align-center justify-space-between"},Ue={key:0,style:{color:"rgb(var(--v-theme-primaryText))"}},je={key:1},Be={key:0},Oe={key:2,class:"text-center py-8"},Le=ze(()=>C("p",{class:"text-grey mt-4"},"æš‚æ— å¯ç”¨çš„æä¾›å•†",-1)),Ee={__name:"ProviderSelector",props:{modelValue:{type:String,default:""},providerType:{type:String,default:"chat_completion"},buttonText:{type:String,default:"é€‰æ‹©æä¾›å•†..."}},emits:["update:modelValue"],setup(o,{emit:z}){const y=o,g=_(!1),u=_([]),m=_(!1),r=_("");J(()=>y.modelValue,x=>{r.value=x||""},{immediate:!0});async function c(){r.value=y.modelValue||"",g.value=!0,await $()}async function $(){m.value=!0;try{const x=await te.get("/api/config/provider/list",{params:{provider_type:y.providerType}});x.data.status==="ok"&&(u.value=x.data.data||[])}catch(x){console.error("åŠ è½½æä¾›å•†åˆ—è¡¨å¤±è´¥:",x),u.value=[]}finally{m.value=!1}}function k(x){r.value=x.id}function D(){z("update:modelValue",r.value),g.value=!1}function U(){r.value=y.modelValue||"",g.value=!1}return(x,P)=>(t(),d(T,null,[C("div",De,[o.modelValue?(t(),d("span",je,v(o.modelValue),1)):(t(),d("span",Ue," æœªé€‰æ‹© ")),l(p,{size:"small",color:"primary",variant:"tonal",onClick:c},{default:e(()=>[s(v(o.buttonText),1)]),_:1})]),l(Y,{modelValue:g.value,"onUpdate:modelValue":P[1]||(P[1]=V=>g.value=V),"max-width":"600px"},{default:e(()=>[l(F,null,{default:e(()=>[l(q,{class:"text-h3 py-4",style:{"font-weight":"normal"}},{default:e(()=>[s(" é€‰æ‹©æä¾›å•† ")]),_:1}),l(B,{class:"pa-0",style:{"max-height":"400px","overflow-y":"auto"}},{default:e(()=>[m.value?(t(),f(ae,{key:0,indeterminate:"",color:"primary"})):b("",!0),!m.value&&u.value.length>0?(t(),f(X,{key:1,density:"compact"},{default:e(()=>[l(A,{key:"none",value:"",onClick:P[0]||(P[0]=V=>k({id:""})),active:r.value==="",rounded:"md",class:"ma-1"},{append:e(()=>[r.value===""?(t(),f(w,{key:0,color:"primary"},{default:e(()=>[s("mdi-check-circle")]),_:1})):b("",!0)]),default:e(()=>[l(N,null,{default:e(()=>[s("ä¸é€‰æ‹©")]),_:1}),l(W,null,{default:e(()=>[s("æ¸…é™¤å½“å‰é€‰æ‹©")]),_:1})]),_:1},8,["active"]),l(ne,{class:"ma-1"}),(t(!0),d(T,null,j(u.value,V=>(t(),f(A,{key:V.id,value:V.id,onClick:K=>k(V),active:r.value===V.id,rounded:"md",class:"ma-1"},{append:e(()=>[r.value===V.id?(t(),f(w,{key:0,color:"primary"},{default:e(()=>[s("mdi-check-circle")]),_:1})):b("",!0)]),default:e(()=>[l(N,null,{default:e(()=>[s(v(V.id),1)]),_:2},1024),l(W,null,{default:e(()=>{var K;return[s(v(V.type||V.provider_type||"æœªçŸ¥ç±»åž‹")+" ",1),(K=V.model_config)!=null&&K.model?(t(),d("span",Be,"- "+v(V.model_config.model),1)):b("",!0)]}),_:2},1024)]),_:2},1032,["value","onClick","active"]))),128))]),_:1})):!m.value&&u.value.length===0?(t(),d("div",Oe,[l(w,{size:"64",color:"grey-lighten-1"},{default:e(()=>[s("mdi-api-off")]),_:1}),Le])):b("",!0)]),_:1}),l(ne),l(M,{class:"pa-4"},{default:e(()=>[l(R),l(p,{variant:"text",onClick:U},{default:e(()=>[s("å–æ¶ˆ")]),_:1}),l(p,{color:"primary",onClick:D},{default:e(()=>[s(" ç¡®è®¤é€‰æ‹© ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},rl=Q(Ee,[["__scopeId","data-v-9f100c2b"]]);const Ae=o=>(G("data-v-a9c38aa5"),o=o(),H(),o),Ne={class:"d-flex align-center justify-space-between"},Je={key:0,style:{color:"rgb(var(--v-theme-primaryText))"}},Fe={key:1},qe={key:2,class:"text-center py-8"},Me=Ae(()=>C("p",{class:"text-grey mt-4"},"æš‚æ— å¯ç”¨çš„äººæ ¼",-1)),Re={__name:"PersonaSelector",props:{modelValue:{type:String,default:""},buttonText:{type:String,default:"é€‰æ‹©äººæ ¼..."}},emits:["update:modelValue"],setup(o,{emit:z}){const y=o,g=_(!1),u=_([]),m=_(!1),r=_(""),c=_(!1);J(()=>y.modelValue,n=>{r.value=n||""},{immediate:!0});async function $(){r.value=y.modelValue||"",g.value=!0,await k()}async function k(){m.value=!0;try{const n=await te.get("/api/persona/list");if(n.data.status==="ok"){const i=n.data.data||[];u.value=[{persona_id:"default",system_prompt:"You are a helpful and friendly assistant."},...i]}}catch(n){console.error("åŠ è½½äººæ ¼åˆ—è¡¨å¤±è´¥:",n),u.value=[{persona_id:"default",system_prompt:"You are a helpful and friendly assistant."}]}finally{m.value=!1}}function D(n){r.value=n.persona_id}function U(){z("update:modelValue",r.value),g.value=!1}function x(){r.value=y.modelValue||"",g.value=!1}function P(){c.value=!0}async function V(n){console.log("äººæ ¼åˆ›å»ºæˆåŠŸ:",n),c.value=!1,await k()}function K(n){console.error("åˆ›å»ºäººæ ¼å¤±è´¥:",n)}return(n,i)=>(t(),d(T,null,[C("div",Ne,[o.modelValue?(t(),d("span",Fe,v(o.modelValue==="default"?"é»˜è®¤äººæ ¼":o.modelValue),1)):(t(),d("span",Je," æœªé€‰æ‹© ")),l(p,{size:"small",color:"primary",variant:"tonal",onClick:$},{default:e(()=>[s(v(o.buttonText),1)]),_:1})]),l(Y,{modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=a=>g.value=a),"max-width":"600px"},{default:e(()=>[l(F,null,{default:e(()=>[l(q,{class:"text-h3 py-4",style:{"font-weight":"normal"}},{default:e(()=>[s(" é€‰æ‹©äººæ ¼ ")]),_:1}),l(B,{class:"pa-2",style:{"max-height":"400px","overflow-y":"auto"}},{default:e(()=>[m.value?(t(),f(ae,{key:0,indeterminate:"",color:"primary"})):b("",!0),!m.value&&u.value.length>0?(t(),f(X,{key:1,density:"compact"},{default:e(()=>[(t(!0),d(T,null,j(u.value,a=>(t(),f(A,{key:a.persona_id,value:a.persona_id,onClick:S=>D(a),active:r.value===a.persona_id,rounded:"md",class:"ma-1"},{append:e(()=>[r.value===a.persona_id?(t(),f(w,{key:0,color:"primary"},{default:e(()=>[s("mdi-check-circle")]),_:1})):b("",!0)]),default:e(()=>[l(N,null,{default:e(()=>[s(v(a.persona_id==="default"?"é»˜è®¤äººæ ¼":a.persona_id),1)]),_:2},1024),l(W,null,{default:e(()=>[s(v(a.system_prompt?a.system_prompt.substring(0,50)+"...":"æ— æè¿°"),1)]),_:2},1024)]),_:2},1032,["value","onClick","active"]))),128))]),_:1})):!m.value&&u.value.length===0?(t(),d("div",qe,[l(w,{size:"64",color:"grey-lighten-1"},{default:e(()=>[s("mdi-account-off")]),_:1}),Me])):b("",!0)]),_:1}),l(M,{class:"pa-4"},{default:e(()=>[l(p,{variant:"text",color:"primary","prepend-icon":"mdi-plus",onClick:P},{default:e(()=>[s(" åˆ›å»ºæ–°äººæ ¼ ")]),_:1}),l(R),l(p,{variant:"text",onClick:x},{default:e(()=>[s("å–æ¶ˆ")]),_:1}),l(p,{color:"primary",onClick:U,disabled:!r.value},{default:e(()=>[s(" ç¡®è®¤é€‰æ‹© ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(me,{modelValue:c.value,"onUpdate:modelValue":i[1]||(i[1]=a=>c.value=a),"editing-persona":null,"mcp-servers":n.mcpServers,"available-tools":n.availableTools,"loading-tools":n.loadingTools,onSaved:V,onError:K},null,8,["modelValue","mcp-servers","available-tools","loading-tools"])],64))}},ml=Q(Re,[["__scopeId","data-v-a9c38aa5"]]);const Ye=o=>(G("data-v-841e1b47"),o=o(),H(),o),Ge={class:"d-flex align-center justify-space-between",style:{gap:"8px"}},He={style:{flex:"1","min-width":"0",overflow:"hidden"}},Qe={key:0,style:{color:"rgb(var(--v-theme-primaryText))"}},We={key:1,class:"d-flex flex-wrap gap-1"},Xe={class:"text-truncate",style:{"max-width":"200px"}},Ze={class:"emoji-icon"},el={key:0},ll={key:1},al={key:0,class:"text-center py-8"},tl=Ye(()=>C("p",{class:"text-grey mt-4 mb-4"},"æš‚æ— çŸ¥è¯†åº“",-1)),ol={key:0,class:"text-caption text-grey"},nl={__name:"KnowledgeBaseSelector",props:{modelValue:{type:Array,default:()=>[]},buttonText:{type:String,default:"é€‰æ‹©çŸ¥è¯†åº“..."}},emits:["update:modelValue"],setup(o,{emit:z}){const y=o,g=re(),u=_(!1),m=_([]),r=_(!1),c=_([]);J(()=>y.modelValue,n=>{c.value=Array.isArray(n)?[...n]:[]},{immediate:!0});async function $(){c.value=Array.isArray(y.modelValue)?[...y.modelValue]:[],u.value=!0,await k()}async function k(){r.value=!0;try{const n=await te.get("/api/kb/list",{params:{page:1,page_size:100}});n.data.status==="ok"?m.value=n.data.data.items||[]:(console.error("åŠ è½½çŸ¥è¯†åº“åˆ—è¡¨å¤±è´¥:",n.data.message),m.value=[])}catch(n){console.error("åŠ è½½çŸ¥è¯†åº“åˆ—è¡¨å¤±è´¥:",n),m.value=[]}finally{r.value=!1}}function D(n){return c.value.includes(n)}function U(n){const i=c.value.indexOf(n);i>-1?c.value.splice(i,1):c.value.push(n)}function x(n){const i=c.value.indexOf(n);i>-1&&c.value.splice(i,1),z("update:modelValue",[...c.value])}function P(){z("update:modelValue",[...c.value]),u.value=!1}function V(){c.value=Array.isArray(y.modelValue)?[...y.modelValue]:[],u.value=!1}function K(){u.value=!1,g.push("/knowledge-base")}return(n,i)=>(t(),d(T,null,[C("div",Ge,[C("div",He,[!o.modelValue||Array.isArray(o.modelValue)&&o.modelValue.length===0?(t(),d("span",Qe," æœªé€‰æ‹© ")):(t(),d("div",We,[(t(!0),d(T,null,j(o.modelValue,a=>(t(),f(E,{key:a,size:"small",color:"primary",variant:"tonal",closable:"","onClick:close":S=>x(a),style:{"max-width":"100%"}},{default:e(()=>[C("span",Xe,v(a),1)]),_:2},1032,["onClick:close"]))),128))]))]),l(p,{size:"small",color:"primary",variant:"tonal",onClick:$,style:{"flex-shrink":"0"}},{default:e(()=>[s(v(o.buttonText),1)]),_:1})]),l(Y,{modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=a=>u.value=a),"max-width":"600px"},{default:e(()=>[l(F,null,{default:e(()=>[l(q,{class:"text-h3 py-4",style:{"font-weight":"normal"}},{default:e(()=>[s(" é€‰æ‹©çŸ¥è¯†åº“ ")]),_:1}),l(B,{class:"pa-0",style:{"max-height":"400px","overflow-y":"auto"}},{default:e(()=>[r.value?(t(),f(ae,{key:0,indeterminate:"",color:"primary"})):b("",!0),r.value?b("",!0):(t(),f(X,{key:1,density:"compact"},{default:e(()=>[(t(!0),d(T,null,j(m.value,a=>(t(),f(A,{key:a.kb_id,value:a.kb_name,onClick:S=>U(a.kb_name),active:D(a.kb_name),rounded:"md",class:"ma-1"},{prepend:e(()=>[C("span",Ze,v(a.emoji||"ðŸ“š"),1)]),append:e(()=>[D(a.kb_name)?(t(),f(w,{key:0,color:"primary"},{default:e(()=>[s(" mdi-checkbox-marked ")]),_:1})):(t(),f(w,{key:1,color:"grey-lighten-1"},{default:e(()=>[s(" mdi-checkbox-blank-outline ")]),_:1}))]),default:e(()=>[l(N,null,{default:e(()=>[s(v(a.kb_name),1)]),_:2},1024),l(W,null,{default:e(()=>[s(v(a.description||"æ— æè¿°")+" ",1),a.doc_count!==void 0?(t(),d("span",el," - "+v(a.doc_count)+" ä¸ªæ–‡æ¡£",1)):b("",!0),a.chunk_count!==void 0?(t(),d("span",ll," - "+v(a.chunk_count)+" ä¸ªå—",1)):b("",!0)]),_:2},1024)]),_:2},1032,["value","onClick","active"]))),128)),m.value.length===0?(t(),d("div",al,[l(w,{size:"64",color:"grey-lighten-1"},{default:e(()=>[s("mdi-database-off")]),_:1}),tl,l(p,{color:"primary",variant:"tonal",onClick:K},{default:e(()=>[s(" åˆ›å»ºçŸ¥è¯†åº“ ")]),_:1})])):b("",!0)]),_:1}))]),_:1}),l(M,{class:"pa-4"},{default:e(()=>[c.value.length>0?(t(),d("div",ol," å·²é€‰æ‹© "+v(c.value.length)+" ä¸ªçŸ¥è¯†åº“ ",1)):b("",!0),l(R),l(p,{variant:"text",onClick:V},{default:e(()=>[s("å–æ¶ˆ")]),_:1}),l(p,{color:"primary",onClick:P},{default:e(()=>[s(" ç¡®è®¤é€‰æ‹© ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},vl=Q(nl,[["__scopeId","data-v-841e1b47"]]);export{vl as K,dl as L,cl as O,rl as P,ml as a};
