import{z as I,c as ae,ao as ce,o,g as v,A as p,t as b,b as e,w as a,e as n,C as m,M as N,N as G,P as W,a as V,T as Fe,p as E,ag as je,ah as ue,B as ke,F as P,h as J,V as ie,ap as Be,d as fe,q as ge,k as ve,l as X,a1 as Y,L as O,a2 as R,a5 as z,G as me,H as pe,u as _e,m as Ve,$ as H,ad as he,E as Pe,al as le,am as $,aO as se,aP as te,a0 as oe,f as q,aR as Oe,aN as Ne,aJ as We,aQ as xe,ac as we,r as ee,W as qe,U as Re,R as $e,S as Je,Q as Xe,Y as Ge,s as Ye,X as He,n as Qe,aS as Ze,aT as Ke,ak as Me,j as ea}from"./index-77b120c5.js";import{V as ne}from"./index-27248cb2.js";import{L as aa,O as la,P as M,a as be,K as sa}from"./KnowledgeBaseSelector-f63d1cc5.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{W as ta}from"./WaitingForRestart-fc0333aa.js";const Ie=s=>(me("data-v-edab4109"),s=s(),pe(),s),oa={class:"d-flex align-center justify-space-between mb-2"},na={class:"flex-grow-1"},ia={key:0,style:{color:"rgb(var(--v-theme-primaryText))"}},da={key:1,style:{color:"rgb(var(--v-theme-primaryText))"}},ra={key:2,style:{color:"rgb(var(--v-theme-primaryText))"}},ua={key:1},ca={key:0,style:{"max-height":"300px","overflow-y":"auto"}},fa=Ie(()=>p("div",{class:"pl-8 pt-2"},[p("small",null,"*ä¸æ˜¾ç¤ºç³»ç»Ÿæ’ä»¶å’Œå·²ç»åœ¨æ’ä»¶é¡µç¦ç”¨çš„æ’ä»¶ã€‚")],-1)),ga={key:1,class:"text-center py-8"},va=Ie(()=>p("p",{class:"text-grey mt-4"},"æš‚æ— å¯ç”¨çš„æ’ä»¶",-1)),ma={__name:"PluginSetSelector",props:{modelValue:{type:Array,default:()=>[]},buttonText:{type:String,default:"é€‰æ‹©æ’ä»¶é›†åˆ..."},maxDisplayItems:{type:Number,default:3}},emits:["update:modelValue"],setup(s,{emit:d}){const h=s,C=I(!1),i=I([]),k=I(!1),T=I("custom"),x=I([]),A=ae(()=>h.modelValue&&h.modelValue.length===1&&h.modelValue[0]==="*");ce(()=>h.modelValue,g=>{!g||g.length===0?(T.value="none",x.value=[]):g.length===1&&g[0]==="*"?(T.value="all",x.value=[]):(T.value="custom",x.value=[...g])},{immediate:!0});async function c(){C.value=!0,await t()}async function t(){k.value=!0;try{const g=await z.get("/api/plugin/get");g.data.status==="ok"&&(i.value=(g.data.data||[]).filter(L=>L.activated&&!L.reserved).sort((L,_)=>L.name.localeCompare(_.name)))}catch(g){console.error("åŠ è½½æ’ä»¶åˆ—è¡¨å¤±è´¥:",g),i.value=[]}finally{k.value=!1}}function F(){let g=[];switch(T.value){case"all":g=["*"];break;case"none":g=[];break;case"custom":g=[...x.value];break}d("update:modelValue",g),C.value=!1}function j(){const g=h.modelValue||[];g.length===0?(T.value="none",x.value=[]):g.length===1&&g[0]==="*"?(T.value="all",x.value=[]):(T.value="custom",x.value=[...g]),C.value=!1}return(g,L)=>(o(),v(P,null,[p("div",null,[p("div",oa,[p("div",na,[!s.modelValue||s.modelValue.length===0?(o(),v("span",ia," æœªå¯ç”¨ä»»ä½•æ’ä»¶ ")):A.value?(o(),v("span",da," å¯ç”¨æ‰€æœ‰æ’ä»¶ (*) ")):(o(),v("span",ra," å·²é€‰æ‹© "+b(s.modelValue.length)+" ä¸ªæ’ä»¶ ",1))]),e(m,{size:"small",color:"primary",variant:"tonal",onClick:c},{default:a(()=>[n(b(s.buttonText),1)]),_:1})])]),e(R,{modelValue:C.value,"onUpdate:modelValue":L[2]||(L[2]=_=>C.value=_),"max-width":"700px"},{default:a(()=>[e(N,null,{default:a(()=>[e(G,{class:"text-h3 py-4",style:{"font-weight":"normal"}},{default:a(()=>[n(" é€‰æ‹©æ’ä»¶é›†åˆ ")]),_:1}),e(W,{class:"pa-4"},{default:a(()=>[k.value?(o(),V(Fe,{key:0,indeterminate:"",color:"primary"})):E("",!0),k.value?E("",!0):(o(),v("div",ua,[e(je,{modelValue:T.value,"onUpdate:modelValue":L[0]||(L[0]=_=>T.value=_),class:"mb-4","hide-details":""},{default:a(()=>[e(ue,{value:"all",label:"å¯ç”¨æ‰€æœ‰æ’ä»¶",color:"primary"}),e(ue,{value:"none",label:"ä¸å¯ç”¨ä»»ä½•æ’ä»¶",color:"primary"}),e(ue,{value:"custom",label:"è‡ªå®šä¹‰é€‰æ‹©",color:"primary"})]),_:1},8,["modelValue"]),T.value==="custom"?(o(),v("div",ca,[i.value.length>0?(o(),V(ke,{key:0,density:"compact"},{default:a(()=>[(o(!0),v(P,null,J(i.value,_=>(o(),V(ie,{key:_.name,rounded:"md",class:"ma-1"},{prepend:a(()=>[e(Be,{modelValue:x.value,"onUpdate:modelValue":L[1]||(L[1]=w=>x.value=w),value:_.name,color:"primary","hide-details":""},null,8,["modelValue","value"])]),default:a(()=>[e(fe,null,{default:a(()=>[n(b(_.name),1)]),_:2},1024),e(ge,null,{default:a(()=>[n(b(_.desc||"æ— æè¿°")+" ",1),_.activated?E("",!0):(o(),V(ve,{key:0,size:"x-small",color:"grey",class:"ml-1"},{default:a(()=>[n(" æœªæ¿€æ´» ")]),_:1}))]),_:2},1024)]),_:2},1024))),128)),fa]),_:1})):(o(),v("div",ga,[e(X,{size:"64",color:"grey-lighten-1"},{default:a(()=>[n("mdi-puzzle-outline")]),_:1}),va]))])):E("",!0)]))]),_:1}),e(Y,{class:"pa-4"},{default:a(()=>[e(O),e(m,{variant:"text",onClick:j},{default:a(()=>[n("å–æ¶ˆ")]),_:1}),e(m,{color:"primary",onClick:F},{default:a(()=>[n(" ç¡®è®¤é€‰æ‹© ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},pa=Q(ma,[["__scopeId","data-v-edab4109"]]);const ye=s=>(me("data-v-a373ce1b"),s=s(),pe(),s),_a=ye(()=>p("span",null,"è‡ªå®šä¹‰æ–‡è½¬å›¾ HTML æ¨¡æ¿",-1)),ha={class:"d-flex align-center gap-2",style:{width:"60%"}},ya={class:"d-flex align-center pa-1",style:{border:"1px solid rgba(0,0,0,0.1)","border-radius":"8px"}},Ca={class:"flex-grow-1",style:{"border-right":"1px solid rgba(0,0,0,0.1)"}},Va={class:"flex-grow-1 preview-container"},ba=["srcdoc"],ka={class:"text-caption text-grey"},xa=ye(()=>p("code",null," text | safe ",-1)),wa=ye(()=>p("code",null," version ",-1)),Ia={__name:"T2ITemplateEditor",setup(s,{expose:d}){_e();const h=I(!1),C=I(!1),i=I(!1),k=I(!1),T=I(!1),x=I(!1),A=I([]),c=I("base"),t=I(null),F=I(""),j=I(""),g=I(!1),L=I(!1),_=I(!1),w=I(!1),D=I(null),S=ae(()=>"vs-light"),l={automaticLayout:!0,fontSize:12,lineNumbers:"on",wordWrap:"on",minimap:{enabled:!1},scrollBeyondLastLine:!1},r={text:`è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹æ–‡æœ¬ï¼Œç”¨äºé¢„è§ˆæ¨¡æ¿æ•ˆæœã€‚

è¿™é‡Œå¯ä»¥åŒ…å«å¤šè¡Œæ–‡æœ¬ï¼Œæ”¯æŒæ¢è¡Œå’Œå„ç§æ ¼å¼ã€‚`,version:"v4.0.0"},B=ae(()=>{try{let f=j.value;return f=f.replace(/\{\{\s*text\s*\|\s*safe\s*\}\}/g,r.text),f=f.replace(/\{\{\s*version\s*\}\}/g,r.version),f}catch(f){return`<div style="color: red; padding: 20px;">æ¨¡æ¿æ¸²æŸ“é”™è¯¯: ${f.message}</div>`}}),u=async()=>{C.value=!0;try{const[f,y]=await Promise.all([z.get("/api/t2i/templates"),z.get("/api/t2i/templates/active")]);f.data.status==="ok"?A.value=f.data.data:console.error("åŠ è½½æ¨¡æ¿åˆ—è¡¨å¤±è´¥:",f.data.message),y.data.status==="ok"?c.value=y.data.data.active_template:console.error("åŠ è½½æ´»åŠ¨æ¨¡æ¿å¤±è´¥:",y.data.message),A.value.length>0&&(t.value=c.value)}catch(f){console.error("åŠ è½½åˆå§‹æ•°æ®å¤±è´¥:",f)}finally{C.value=!1}},Z=async f=>{if(f){T.value=!0;try{const y=await z.get(`/api/t2i/templates/${f}`);y.data.status==="ok"?j.value=y.data.data.content:console.error(`åŠ è½½æ¨¡æ¿ '${f}' å¤±è´¥:`,y.data.message)}catch(y){console.error(`åŠ è½½æ¨¡æ¿ '${f}' å¤±è´¥:`,y)}finally{T.value=!1}}},Ce=async()=>{i.value=!0;try{if(g.value){if(!F.value)return;const f=await z.post("/api/t2i/templates/create",{name:F.value,content:j.value});await u(),t.value=f.data.data.name,g.value=!1}else{if(!t.value)return;await z.put(`/api/t2i/templates/${t.value}`,{content:j.value})}}catch(f){console.error("ä¿å­˜æ¨¡æ¿å¤±è´¥:",f)}finally{i.value=!1}},K=async f=>{x.value=!0;try{await z.post("/api/t2i/templates/set_active",{name:f}),c.value=f}catch(y){console.error(`åº”ç”¨æ¨¡æ¿ '${f}' å¤±è´¥:`,y)}finally{x.value=!1}},Se=async()=>{if(!(!t.value||t.value==="base")){i.value=!0;try{const f=t.value;await z.delete(`/api/t2i/templates/${f}`),_.value=!1,c.value===f&&await K("base"),await u(),t.value="base"}catch(f){console.error(`åˆ é™¤æ¨¡æ¿ '${t.value}' å¤±è´¥:`,f)}finally{i.value=!1}}},Te=async()=>{k.value=!0;try{await z.post("/api/t2i/templates/reset_default"),L.value=!1,t.value==="base"&&await Z("base"),c.value!=="base"&&await K("base")}catch(f){console.error("é‡ç½®æ¨¡æ¿å¤±è´¥:",f)}finally{k.value=!1}},De=()=>{L.value=!0},Ue=()=>{g.value=!0,t.value=null,F.value="",j.value=`<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>New Template</title>
</head>
<body>
  <!-- ä»è¿™é‡Œå¼€å§‹ç¼–è¾‘ -->
  <article>{{ text | safe }}</article>
</body>
</html>
`},Ee=()=>{t.value&&t.value!=="base"&&(_.value=!0)},Le=()=>{!g.value&&t.value&&(w.value=!0)},ze=async()=>{g.value||(await Ce(),await K(t.value),w.value=!1,de())},Ae=()=>{T.value=!0,Oe(()=>{D.value&&D.value.contentWindow.location.reload(),setTimeout(()=>T.value=!1,500)})},de=()=>{h.value=!1};return ce(h,f=>{f?u():(t.value=null,j.value="",g.value=!1)}),ce(t,f=>{f&&(g.value=!1,Z(f))}),d({openDialog:()=>{h.value=!0}}),(f,y)=>(o(),V(R,{modelValue:h.value,"onUpdate:modelValue":y[9]||(y[9]=U=>h.value=U),"max-width":"1400px",persistent:"",scrollable:""},{activator:a(({props:U})=>[e(m,Ve(U,{variant:"outlined",color:"primary",size:"small",loading:C.value}),{default:a(()=>[n(" è‡ªå®šä¹‰ T2I æ¨¡æ¿ ")]),_:2},1040,["loading"])]),default:a(()=>[e(N,null,{default:a(()=>[e(G,{class:"d-flex align-center justify-space-between"},{default:a(()=>[_a,e(O),p("div",ha,[g.value?(o(),V(H,{key:0,modelValue:F.value,"onUpdate:modelValue":y[0]||(y[0]=U=>F.value=U),label:"è¾“å…¥æ–°æ¨¡æ¿åç§°",density:"compact","hide-details":"",variant:"outlined",class:"flex-grow-1",autofocus:"",rules:[U=>!!U||"åç§°ä¸èƒ½ä¸ºç©º"]},null,8,["modelValue","rules"])):(o(),V(he,{key:1,modelValue:t.value,"onUpdate:modelValue":y[1]||(y[1]=U=>t.value=U),items:A.value,"item-title":"name","item-value":"name",label:"é€‰æ‹©æ¨¡æ¿",density:"compact","hide-details":"",variant:"outlined",class:"flex-grow-1",loading:C.value},{item:a(({props:U,item:re})=>[e(ie,Ve(U,{title:re.raw.name}),{append:a(()=>[re.raw.name===c.value?(o(),V(ve,{key:0,color:"success",variant:"tonal",size:"small",class:"ml-2"},{default:a(()=>[n(" å·²åº”ç”¨ ")]),_:1})):(o(),V(m,{key:1,variant:"text",color:"primary",size:"small",class:"ml-2",onClick:Pe(hl=>K(re.raw.name),["stop"]),loading:x.value},{default:a(()=>[n(" åº”ç”¨ ")]),_:2},1032,["onClick","loading"]))]),_:2},1040,["title"])]),_:1},8,["modelValue","items","loading"])),e(m,{variant:"text",icon:"",onClick:de},{default:a(()=>[e(X,null,{default:a(()=>[n("mdi-close")]),_:1})]),_:1})])]),_:1}),e(W,{class:"pa-0"},{default:a(()=>[e(le,{"no-gutters":"",style:{height:"70vh"}},{default:a(()=>[e($,{cols:"6",class:"d-flex flex-column"},{default:a(()=>[e(se,{density:"compact",color:"surface-variant"},{default:a(()=>[e(te,{class:"text-subtitle-2"},{default:a(()=>[n("æ¨¡æ¿ç¼–è¾‘å™¨")]),_:1}),e(O),p("div",ya,[e(m,{variant:"text",size:"small",onClick:Ue,color:"success"},{default:a(()=>[e(X,{left:""},{default:a(()=>[n("mdi-plus")]),_:1}),n(" æ–°å»º ")]),_:1}),e(oe,{vertical:"",class:"mx-1"}),e(m,{variant:"text",size:"small",onClick:De,loading:k.value,color:"warning"},{default:a(()=>[n(" é‡ç½®Base ")]),_:1},8,["loading"]),e(m,{variant:"text",size:"small",onClick:Ee,color:"error",disabled:g.value||t.value==="base"||!t.value},{default:a(()=>[n(" åˆ é™¤ ")]),_:1},8,["disabled"]),e(oe,{vertical:"",class:"mx-1"}),e(m,{variant:"text",size:"small",onClick:Ce,loading:i.value,color:"primary",disabled:g.value&&!F.value||!g.value&&!t.value},{default:a(()=>[n(" ä¿å­˜ ")]),_:1},8,["loading","disabled"])])]),_:1}),p("div",Ca,[e(q(ne),{value:j.value,"onUpdate:value":y[2]||(y[2]=U=>j.value=U),theme:S.value,language:"html",options:l,style:{height:"100%"}},null,8,["value","theme"])])]),_:1}),e($,{cols:"6",class:"d-flex flex-column"},{default:a(()=>[e(se,{density:"compact",color:"surface-variant"},{default:a(()=>[e(te,{class:"text-subtitle-2"},{default:a(()=>[n("å®æ—¶é¢„è§ˆ(å¯èƒ½æœ‰å·®å¼‚)")]),_:1}),e(O),e(m,{variant:"text",size:"small",onClick:Ae,loading:T.value},{default:a(()=>[n(" åˆ·æ–°é¢„è§ˆ ")]),_:1},8,["loading"])]),_:1}),p("div",Va,[p("iframe",{ref_key:"previewFrame",ref:D,srcdoc:B.value,style:{width:"100%",height:"100%",border:"none",zoom:"0.6"}},null,8,ba)])]),_:1})]),_:1})]),_:1}),e(Y,{class:"px-6 py-4"},{default:a(()=>[e(le,{"no-gutters":"",class:"align-center"},{default:a(()=>[e($,null,{default:a(()=>[p("div",ka,[e(X,{size:"16",class:"mr-1"},{default:a(()=>[n("mdi-information")]),_:1}),n(" æ”¯æŒ jinja2 è¯­æ³•ã€‚å¯ç”¨å˜é‡ï¼š"),xa,n("ï¼ˆè¦æ¸²æŸ“çš„æ–‡æœ¬ï¼‰, "),wa,n("ï¼ˆAstrBot ç‰ˆæœ¬ï¼‰ ")])]),_:1}),e($,{cols:"auto"},{default:a(()=>[e(m,{variant:"text",onClick:de},{default:a(()=>[n(" å–æ¶ˆ ")]),_:1}),e(m,{color:"primary",onClick:Le,loading:i.value,disabled:g.value||!t.value},{default:a(()=>[n(" ä¿å­˜åº”ç”¨å½“å‰ç¼–è¾‘æ¨¡æ¿ ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{modelValue:L.value,"onUpdate:modelValue":y[4]||(y[4]=U=>L.value=U),"max-width":"400px"},{default:a(()=>[e(N,null,{default:a(()=>[e(G,null,{default:a(()=>[n("ç¡®è®¤é‡ç½®")]),_:1}),e(W,null,{default:a(()=>[n(" ç¡®å®šè¦å°† 'base' æ¨¡æ¿æ¢å¤ä¸ºé»˜è®¤å†…å®¹å—ï¼Ÿå½“å‰ç¼–è¾‘å™¨ä¸­çš„ä»»ä½•æœªä¿å­˜æ›´æ”¹å°†ä¸¢å¤±ã€‚æ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚ ")]),_:1}),e(Y,null,{default:a(()=>[e(O),e(m,{text:"",onClick:y[3]||(y[3]=U=>L.value=!1)},{default:a(()=>[n("å–æ¶ˆ")]),_:1}),e(m,{color:"warning",onClick:Te,loading:k.value},{default:a(()=>[n("ç¡®è®¤é‡ç½®")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(R,{modelValue:_.value,"onUpdate:modelValue":y[6]||(y[6]=U=>_.value=U),"max-width":"400px"},{default:a(()=>[e(N,null,{default:a(()=>[e(G,null,{default:a(()=>[n("ç¡®è®¤åˆ é™¤")]),_:1}),e(W,null,{default:a(()=>[n(" ç¡®å®šè¦åˆ é™¤æ¨¡æ¿ '"+b(t.value)+"' å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚ ",1)]),_:1}),e(Y,null,{default:a(()=>[e(O),e(m,{text:"",onClick:y[5]||(y[5]=U=>_.value=!1)},{default:a(()=>[n("å–æ¶ˆ")]),_:1}),e(m,{color:"error",onClick:Se,loading:i.value},{default:a(()=>[n("ç¡®è®¤åˆ é™¤")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(R,{modelValue:w.value,"onUpdate:modelValue":y[8]||(y[8]=U=>w.value=U),"max-width":"500px"},{default:a(()=>[e(N,null,{default:a(()=>[e(G,null,{default:a(()=>[n("ç¡®è®¤æ“ä½œ")]),_:1}),e(W,null,{default:a(()=>[n(" ç¡®å®šè¦ä¿å­˜å¯¹ '"+b(t.value)+"' çš„ä¿®æ”¹ï¼Œå¹¶å°†å…¶è®¾ä¸ºæ–°çš„æ´»åŠ¨æ¨¡æ¿å—ï¼Ÿ ",1)]),_:1}),e(Y,null,{default:a(()=>[e(O),e(m,{text:"",onClick:y[7]||(y[7]=U=>w.value=!1)},{default:a(()=>[n("å–æ¶ˆ")]),_:1}),e(m,{color:"primary",onClick:ze,loading:i.value},{default:a(()=>[n("ç¡®è®¤")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}},Sa=Q(Ia,[["__scopeId","data-v-a373ce1b"]]);const Ta=s=>(me("data-v-3104c822"),s=s(),pe(),s),Da={key:0,class:"important-hint"},Ua={key:1,class:"object-config"},Ea={class:"property-key"},La={key:0,class:"important-hint"},za={key:0,class:"w-100"},Aa={key:1,class:"editor-container"},Fa={key:1},ja={key:2},Ba={key:3},Pa={key:4},Oa={key:5},Na={key:6},Wa={key:7},qa={key:8},Ra={key:9},$a={key:0,class:"selected-plugins-full-width"},Ja=Ta(()=>p("div",{class:"plugins-header"},[p("small",{class:"text-grey"},"å·²é€‰æ‹©çš„æ’ä»¶ï¼š")],-1)),Xa={class:"d-flex flex-wrap ga-2 mt-2"},Ga={__name:"AstrBotConfigV4",props:{metadata:{type:Object,required:!0},iterable:{type:Object,required:!0},metadataKey:{type:String,required:!0}},setup(s){const d=s,{t:h}=_e(),C=I(!1),i=I(""),k=I("json"),T=I("vs-light");let x=null;function A(_,w){const D=w.split(".");let S=_;for(const l of D)if(S&&typeof S=="object"&&l in S)S=S[l];else return;return S}function c(_,w,D){const S=w.split(".");let l=_;for(let r=0;r<S.length-1;r++){const B=S[r];(!l[B]||typeof l[B]!="object")&&(l[B]={}),l=l[B]}l[S[S.length-1]]=D}function t(_){return ae({get(){return A(d.iterable,_)},set(w){c(d.iterable,_,w)}})}function F(_,w,D,S){i.value=_,k.value=S||"json",T.value=D||"vs-light",x=w,C.value=!0}function j(){C.value=!1}function g(_,w){if(!(_!=null&&_.condition))return!0;for(const[D,S]of Object.entries(_.condition))if(A(d.iterable,D)!==S)return!1;return!0}function L(_,w){const D=Object.entries(_);for(let S=w+1;S<D.length;S++){const[l,r]=D[S];if(g(r))return!0}return!1}return(_,w)=>(o(),v(P,null,[e(N,{style:{"margin-bottom":"16px","padding-bottom":"8px","background-color":"rgb(var(--v-theme-background))"},rounded:"md",variant:"outlined"},{default:a(()=>{var D,S;return[((D=s.metadata[s.metadataKey])==null?void 0:D.type)==="object"?(o(),V(W,{key:0,class:"config-section",style:{"padding-bottom":"8px"}},{default:a(()=>[e(fe,{class:"config-title"},{default:a(()=>{var l;return[n(b((l=s.metadata[s.metadataKey])==null?void 0:l.description),1)]}),_:1}),e(ge,{class:"config-hint"},{default:a(()=>{var l,r,B;return[(l=s.metadata[s.metadataKey])!=null&&l.obvious_hint&&((r=s.metadata[s.metadataKey])!=null&&r.hint)?(o(),v("span",Da,"â€¼ï¸")):E("",!0),n(" "+b((B=s.metadata[s.metadataKey])==null?void 0:B.hint),1)]}),_:1})]),_:1})):E("",!0),((S=s.metadata[s.metadataKey])==null?void 0:S.type)==="object"?(o(),v("div",Ua,[(o(!0),v(P,null,J(s.metadata[s.metadataKey].items,(l,r,B)=>(o(),v("div",{key:r,class:"config-item"},[g(l,r)?(o(),v(P,{key:0},[l!=null&&l.invisible?E("",!0):(o(),V(le,{key:0,class:"config-row"},{default:a(()=>[e($,{cols:"12",sm:"6",class:"property-info"},{default:a(()=>[e(ie,{density:"compact"},{default:a(()=>[e(fe,{class:"property-name"},{default:a(()=>[n(b((l==null?void 0:l.description)||r)+" ",1),p("span",Ea,"("+b(r)+")",1)]),_:2},1024),e(ge,{class:"property-hint"},{default:a(()=>[l!=null&&l.obvious_hint&&(l!=null&&l.hint)?(o(),v("span",La,"â€¼ï¸")):E("",!0),n(" "+b(l==null?void 0:l.hint),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e($,{cols:"12",sm:"6",class:"config-input"},{default:a(()=>[l!=null&&l._special?(l==null?void 0:l._special)==="select_provider"?(o(),v("div",Fa,[e(M,{modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,"provider-type":"chat_completion"},null,8,["modelValue","onUpdate:modelValue"])])):(l==null?void 0:l._special)==="select_provider_stt"?(o(),v("div",ja,[e(M,{modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,"provider-type":"speech_to_text"},null,8,["modelValue","onUpdate:modelValue"])])):(l==null?void 0:l._special)==="select_provider_tts"?(o(),v("div",Ba,[e(M,{modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,"provider-type":"text_to_speech"},null,8,["modelValue","onUpdate:modelValue"])])):(l==null?void 0:l._special)==="provider_pool"?(o(),v("div",Pa,[e(M,{modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,"provider-type":"chat_completion","button-text":"é€‰æ‹©æä¾›å•†æ± ..."},null,8,["modelValue","onUpdate:modelValue"])])):(l==null?void 0:l._special)==="select_persona"?(o(),v("div",Oa,[e(be,{modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u},null,8,["modelValue","onUpdate:modelValue"])])):(l==null?void 0:l._special)==="persona_pool"?(o(),v("div",Na,[e(be,{modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,"button-text":"é€‰æ‹©äººæ ¼æ± ..."},null,8,["modelValue","onUpdate:modelValue"])])):(l==null?void 0:l._special)==="select_knowledgebase"?(o(),v("div",Wa,[e(sa,{modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u},null,8,["modelValue","onUpdate:modelValue"])])):(l==null?void 0:l._special)==="select_plugin_set"?(o(),v("div",qa,[e(pa,{modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u},null,8,["modelValue","onUpdate:modelValue"])])):(l==null?void 0:l._special)==="t2i_template"?(o(),v("div",Ra,[e(Sa)])):E("",!0):(o(),v("div",za,[l!=null&&l.options?(o(),V(he,{key:0,modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,items:l!=null&&l.labels?l.options.map((u,Z)=>({title:l.labels[Z]||u,value:u})):l.options,disabled:l==null?void 0:l.readonly,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","disabled"])):l!=null&&l.editor_mode?(o(),v("div",Aa,[e(q(ne),{theme:(l==null?void 0:l.editor_theme)||"vs-light",language:(l==null?void 0:l.editor_language)||"json",style:{"min-height":"100px","flex-grow":"1",border:"1px solid rgba(0, 0, 0, 0.1)"},value:t(r).value,"onUpdate:value":u=>t(r).value=u},null,8,["theme","language","value","onUpdate:value"]),e(m,{icon:"",size:"small",variant:"text",color:"primary",class:"editor-fullscreen-btn",onClick:u=>F(r,s.iterable,l==null?void 0:l.editor_theme,l==null?void 0:l.editor_language),title:q(h)("core.common.editor.fullscreen")},{default:a(()=>[e(X,null,{default:a(()=>[n("mdi-fullscreen")]),_:1})]),_:2},1032,["onClick","title"])])):(l==null?void 0:l.type)==="string"?(o(),V(H,{key:2,modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):(l==null?void 0:l.type)==="int"||(l==null?void 0:l.type)==="float"?(o(),V(H,{key:3,modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,density:"compact",variant:"outlined",class:"config-field",type:"number","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):(l==null?void 0:l.type)==="text"?(o(),V(Ne,{key:4,modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,variant:"outlined",rows:"3",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):(l==null?void 0:l.type)==="bool"?(o(),V(We,{key:5,modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,color:"primary",inset:"",density:"compact","hide-details":"",style:{display:"flex","justify-content":"end"}},null,8,["modelValue","onUpdate:modelValue"])):(l==null?void 0:l.type)==="list"?(o(),V(aa,{key:6,modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,"button-text":"ä¿®æ”¹",class:"config-field"},null,8,["modelValue","onUpdate:modelValue"])):(l==null?void 0:l.type)==="dict"?(o(),V(la,{key:7,modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,class:"config-field"},null,8,["modelValue","onUpdate:modelValue"])):(o(),V(H,{key:8,modelValue:t(r).value,"onUpdate:modelValue":u=>t(r).value=u,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]))]))]),_:2},1024)]),_:2},1024)),!(l!=null&&l.invisible)&&(l==null?void 0:l._special)==="select_plugin_set"?(o(),V(le,{key:1,class:"plugin-set-display-row"},{default:a(()=>[e($,{cols:"12",class:"plugin-set-display"},{default:a(()=>[t(r).value&&t(r).value.length>0?(o(),v("div",$a,[Ja,p("div",Xa,[(o(!0),v(P,null,J(t(r).value||[],u=>(o(),V(ve,{key:u,size:"small",label:"",color:"primary",variant:"outlined"},{default:a(()=>[n(b(u==="*"?"æ‰€æœ‰æ’ä»¶":u),1)]),_:2},1024))),128))])])):E("",!0)]),_:2},1024)]),_:2},1024)):E("",!0)],64)):E("",!0),g(l,r)&&L(s.metadata[s.metadataKey].items,B)?(o(),V(oe,{key:1,class:"config-divider"})):E("",!0)]))),128))])):E("",!0)]}),_:1}),e(R,{modelValue:C.value,"onUpdate:modelValue":w[2]||(w[2]=D=>C.value=D),fullscreen:"",transition:"dialog-bottom-transition",scrollable:""},{default:a(()=>[e(N,null,{default:a(()=>[e(se,{color:"primary",dark:""},{default:a(()=>[e(m,{icon:"",onClick:w[0]||(w[0]=D=>C.value=!1)},{default:a(()=>[e(X,null,{default:a(()=>[n("mdi-close")]),_:1})]),_:1}),e(te,null,{default:a(()=>[n(b(q(h)("core.common.editor.editingTitle"))+" - "+b(i.value),1)]),_:1}),e(O),e(xe,null,{default:a(()=>[e(m,{variant:"text",onClick:j},{default:a(()=>[n(b(q(h)("core.common.save")),1)]),_:1})]),_:1})]),_:1}),e(W,{class:"pa-0"},{default:a(()=>[e(q(ne),{theme:T.value,language:k.value,style:{height:"calc(100vh - 64px)"},value:q(x)[i.value],"onUpdate:value":w[1]||(w[1]=D=>q(x)[i.value]=D)},null,8,["theme","language","value"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Ya=Q(Ga,[["__scopeId","data-v-3104c822"]]);const Ha={name:"AstrBotCoreConfigWrapper",components:{AstrBotConfigV4:Ya},props:{metadata:{type:Object,required:!0,default:()=>({})},config_data:{type:Object,required:!0,default:()=>({})},readonly:{type:Boolean,default:!1}},setup(){const{tm:s}=we("features/config");return{tm:s}},data(){return{tab:0}},methods:{}},Qa={style:{"margin-left":"16px","padding-bottom":"16px"}},Za={href:"https://astrbot.app/",target:"_blank"},Ka={href:"https://qm.qq.com/cgi-bin/qm/qr?k=EYGsuUTfe00_iOu9JTXS7_TEpMkXOvwv&jump_from=webapi&authKey=uUEMKCROfsseS+8IzqPjzV3y1tzy4AkykwTib2jNkOFdzezF9s9XknqnIaf3CDft",target:"_blank"};function Ma(s,d,h,C,i,k){const T=ee("AstrBotConfigV4");return o(),v("div",{class:Qe(s.$vuetify.display.mobile?"":"d-flex")},[e(Re,{modelValue:i.tab,"onUpdate:modelValue":d[0]||(d[0]=x=>i.tab=x),direction:s.$vuetify.display.mobile?"horizontal":"vertical","align-tabs":s.$vuetify.display.mobile?"left":"start",color:"deep-purple-accent-4",class:"config-tabs"},{default:a(()=>[(o(!0),v(P,null,J(h.metadata,(x,A,c)=>(o(),V(qe,{key:c,value:c,style:{"font-weight":"1000","font-size":"15px"}},{default:a(()=>[n(b(h.metadata[A].name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","direction","align-tabs"]),e(He,{modelValue:i.tab,"onUpdate:modelValue":d[1]||(d[1]=x=>i.tab=x),class:"config-tabs-window",style:Ye(h.readonly?"pointer-events: none; opacity: 0.6;":"")},{default:a(()=>[(o(!0),v(P,null,J(h.metadata,(x,A,c)=>$e((o(),V(Ge,{key:c},{default:a(()=>[e(Xe,{fluid:""},{default:a(()=>[(o(!0),v(P,null,J(h.metadata[A].metadata,(t,F,j)=>(o(),v("div",{key:F},[e(T,{metadata:{[F]:h.metadata[A].metadata[F]},iterable:h.config_data,metadataKey:F},null,8,["metadata","iterable","metadataKey"])]))),128))]),_:2},1024)]),_:2},1024)),[[Je,c==i.tab]])),128)),p("div",Qa,[p("small",null,[n(b(C.tm("help.helpPrefix"))+" ",1),p("a",Za,b(C.tm("help.documentation")),1),n(" "+b(C.tm("help.helpMiddle"))+" ",1),p("a",Ka,b(C.tm("help.support")),1),n(b(C.tm("help.helpSuffix")),1)])])]),_:1},8,["modelValue","style"])],2)}const el=Q(Ha,[["render",Ma]]);const al={name:"ConfigPage",components:{AstrBotCoreConfigWrapper:el,VueMonacoEditor:ne,WaitingForRestart:ta},props:{initialConfigId:{type:String,default:null}},setup(){const{t:s}=_e(),{tm:d}=we("features/config");return{t:s,tm:d}},computed:{messages(){return{loadError:this.tm("messages.loadError"),saveSuccess:this.tm("messages.saveSuccess"),saveError:this.tm("messages.saveError"),configApplied:this.tm("messages.configApplied"),configApplyError:this.tm("messages.configApplyError")}},configInfoNameList(){return this.configInfoList.map(s=>s.name)},selectedConfigInfo(){return this.configInfoList.find(s=>s.id===this.selectedConfigID)||{}},configSelectItems(){const s=[...this.configInfoList];return s.push({id:"_%manage%_",name:"ç®¡ç†é…ç½®æ–‡ä»¶...",umop:[]}),s}},watch:{config_data_str(s){this.config_data_has_changed=!0},initialConfigId(s){s&&this.selectedConfigID!==s&&this.getConfigInfoList(s)}},data(){return{codeEditorDialog:!1,configManageDialog:!1,showConfigForm:!1,isEditingConfig:!1,config_data_has_changed:!1,config_data_str:"",config_data:{config:{}},fetched:!1,metadata:{},save_message_snack:!1,save_message:"",save_message_success:"",configContentKey:0,configType:"normal",isSystemConfig:!1,selectedConfigID:null,configInfoList:[],configFormData:{name:""},editingConfigId:null}},mounted(){const s=this.initialConfigId||"default";this.getConfigInfoList(s),this.configType=this.isSystemConfig?"system":"normal"},methods:{getConfigInfoList(s){z.get("/api/config/abconfs").then(d=>{if(this.configInfoList=d.data.data.info_list,s){let h=!1;for(let C=0;C<this.configInfoList.length;C++)if(this.configInfoList[C].id===s){this.selectedConfigID=this.configInfoList[C].id,this.getConfig(s),h=!0;break}!h&&this.configInfoList.length&&(this.selectedConfigID=this.configInfoList[0].id,this.getConfig(this.selectedConfigID))}}).catch(d=>{this.save_message=this.messages.loadError,this.save_message_snack=!0,this.save_message_success="error"})},getConfig(s){this.fetched=!1;const d={};this.isSystemConfig?d.system_config="1":d.id=s||this.selectedConfigID,z.get("/api/config/abconf",{params:d}).then(h=>{this.config_data=h.data.data.config,this.fetched=!0,this.metadata=h.data.data.metadata,this.configContentKey+=1}).catch(h=>{this.save_message=this.messages.loadError,this.save_message_snack=!0,this.save_message_success="error"})},updateConfig(){if(!this.fetched)return;const s={config:JSON.parse(JSON.stringify(this.config_data))};this.isSystemConfig?s.conf_id="default":s.conf_id=this.selectedConfigID,z.post("/api/config/astrbot/update",s).then(d=>{d.data.status==="ok"?(this.save_message=d.data.message||this.messages.saveSuccess,this.save_message_snack=!0,this.save_message_success="success",this.isSystemConfig&&z.post("/api/stat/restart-core").then(()=>{this.$refs.wfr.check()})):(this.save_message=d.data.message||this.messages.saveError,this.save_message_snack=!0,this.save_message_success="error")}).catch(d=>{this.save_message=this.messages.saveError,this.save_message_snack=!0,this.save_message_success="error"})},configToString(){this.config_data_str=JSON.stringify(this.config_data,null,2),this.config_data_has_changed=!1},applyStrConfig(){try{this.config_data=JSON.parse(this.config_data_str),this.config_data_has_changed=!1,this.save_message_success="success",this.save_message=this.messages.configApplied,this.save_message_snack=!0}catch{this.save_message_success="error",this.save_message=this.messages.configApplyError,this.save_message_snack=!0}},createNewConfig(){z.post("/api/config/abconf/new",{name:this.configFormData.name}).then(s=>{s.data.status==="ok"?(this.save_message=s.data.message,this.save_message_snack=!0,this.save_message_success="success",this.getConfigInfoList(s.data.data.conf_id),this.cancelConfigForm()):(this.save_message=s.data.message,this.save_message_snack=!0,this.save_message_success="error")}).catch(s=>{console.error(s),this.save_message="æ–°é…ç½®æ–‡ä»¶åˆ›å»ºå¤±è´¥",this.save_message_snack=!0,this.save_message_success="error"})},onConfigSelect(s){s==="_%manage%_"?(this.configManageDialog=!0,this.$nextTick(()=>{this.selectedConfigID=this.selectedConfigInfo.id||"default"})):this.getConfig(s)},startCreateConfig(){this.showConfigForm=!0,this.isEditingConfig=!1,this.configFormData={name:""},this.editingConfigId=null},startEditConfig(s){this.showConfigForm=!0,this.isEditingConfig=!0,this.editingConfigId=s.id,this.configFormData={name:s.name||""}},cancelConfigForm(){this.showConfigForm=!1,this.isEditingConfig=!1,this.editingConfigId=null,this.configFormData={name:""}},saveConfigForm(){if(!this.configFormData.name){this.save_message="è¯·å¡«å†™é…ç½®åç§°",this.save_message_snack=!0,this.save_message_success="error";return}this.isEditingConfig?this.updateConfigInfo():this.createNewConfig()},confirmDeleteConfig(s){confirm(`ç¡®å®šè¦åˆ é™¤é…ç½®æ–‡ä»¶ "${s.name}" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`)&&this.deleteConfig(s.id)},deleteConfig(s){z.post("/api/config/abconf/delete",{id:s}).then(d=>{d.data.status==="ok"?(this.save_message=d.data.message,this.save_message_snack=!0,this.save_message_success="success",this.cancelConfigForm(),this.getConfigInfoList("default")):(this.save_message=d.data.message,this.save_message_snack=!0,this.save_message_success="error")}).catch(d=>{console.error(d),this.save_message="åˆ é™¤é…ç½®æ–‡ä»¶å¤±è´¥",this.save_message_snack=!0,this.save_message_success="error"})},updateConfigInfo(){z.post("/api/config/abconf/update",{id:this.editingConfigId,name:this.configFormData.name}).then(s=>{s.data.status==="ok"?(this.save_message=s.data.message,this.save_message_snack=!0,this.save_message_success="success",this.getConfigInfoList(this.editingConfigId),this.cancelConfigForm()):(this.save_message=s.data.message,this.save_message_snack=!0,this.save_message_success="error")}).catch(s=>{console.error(s),this.save_message="æ›´æ–°é…ç½®æ–‡ä»¶å¤±è´¥",this.save_message_snack=!0,this.save_message_success="error"})},onConfigTypeToggle(){this.isSystemConfig=this.configType==="system",this.fetched=!1,this.isSystemConfig?this.getConfig():this.selectedConfigID?this.getConfig(this.selectedConfigID):this.getConfigInfoList("default")},onSystemConfigToggle(){this.configType=this.isSystemConfig?"system":"normal",this.fetched=!1,this.isSystemConfig?this.getConfig():this.selectedConfigID?this.getConfig(this.selectedConfigID):this.getConfigInfoList("default")}}},ll={style:{display:"flex","flex-direction":"column","align-items":"center"}},sl={key:0,class:"mt-4 config-panel",style:{display:"flex","flex-direction":"column","align-items":"start"}},tl={class:"d-flex flex-row pr-4",style:{"margin-bottom":"16px","align-items":"center",gap:"12px","justify-content":"space-between",width:"100%"}},ol={class:"d-flex flex-row align-center",style:{gap:"12px"}},nl={style:{color:"inherit"},href:"https://blog.astrbot.app/posts/what-is-changed-in-4.0.0/#%E5%A4%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6",target:"_blank"},il={style:{"margin-left":"16px"}},dl=p("span",{class:"text-h4"},"é…ç½®æ–‡ä»¶ç®¡ç†",-1),rl=p("small",null,"AstrBot æ”¯æŒé’ˆå¯¹ä¸åŒæœºå™¨äººåˆ†åˆ«è®¾ç½®é…ç½®æ–‡ä»¶ã€‚é»˜è®¤ä¼šä½¿ç”¨ `default` é…ç½®ã€‚",-1),ul={class:"mt-6 mb-4"},cl={class:"d-flex align-center",style:{gap:"8px"}},fl={key:1},gl={class:"mb-4"},vl=p("h4",null,"åç§°",-1),ml={class:"d-flex justify-end mt-4",style:{gap:"8px"}};function pl(s,d,h,C,i,k){const T=ee("AstrBotCoreConfigWrapper"),x=ee("VueMonacoEditor"),A=ee("WaitingForRestart");return o(),v(P,null,[p("div",ll,[i.selectedConfigID||i.isSystemConfig?(o(),v("div",sl,[p("div",tl,[p("div",ol,[i.isSystemConfig?E("",!0):(o(),V(he,{key:0,style:{"min-width":"130px"},modelValue:i.selectedConfigID,"onUpdate:modelValue":[d[0]||(d[0]=c=>i.selectedConfigID=c),k.onConfigSelect],items:k.configSelectItems,"item-title":"name",disabled:h.initialConfigId!==null,"item-value":"id",label:"é€‰æ‹©é…ç½®æ–‡ä»¶","hide-details":"",density:"compact",rounded:"md",variant:"outlined"},null,8,["modelValue","items","disabled","onUpdate:modelValue"])),p("a",nl,[e(m,{icon:"mdi-help-circle",size:"small",variant:"plain"})])]),e(Ze,{modelValue:i.configType,"onUpdate:modelValue":[d[1]||(d[1]=c=>i.configType=c),k.onConfigTypeToggle],mandatory:"",color:"primary",variant:"outlined",density:"comfortable",rounded:"md"},{default:a(()=>[e(m,{value:"normal","prepend-icon":"mdi-cog",size:"large"},{default:a(()=>[n(" æ™®é€š ")]),_:1}),e(m,{value:"system","prepend-icon":"mdi-cog-outline",size:"large"},{default:a(()=>[n(" ç³»ç»Ÿ ")]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),e(Ke,{mode:"out-in"},{default:a(()=>[(i.selectedConfigID||i.isSystemConfig)&&i.fetched?(o(),v("div",{key:i.configContentKey,class:"config-content",style:{width:"100%"}},[e(T,{metadata:i.metadata,config_data:i.config_data},null,8,["metadata","config_data"]),e(m,{icon:"mdi-content-save",size:"x-large",style:{position:"fixed",right:"52px",bottom:"52px"},color:"darkprimary",onClick:k.updateConfig},null,8,["onClick"]),e(m,{icon:"mdi-code-json",size:"x-large",style:{position:"fixed",right:"52px",bottom:"124px"},color:"primary",onClick:d[2]||(d[2]=c=>{k.configToString(),i.codeEditorDialog=!0})})])):E("",!0)]),_:1})])):E("",!0)]),e(R,{modelValue:i.codeEditorDialog,"onUpdate:modelValue":d[7]||(d[7]=c=>i.codeEditorDialog=c),fullscreen:"",transition:"dialog-bottom-transition",scrollable:""},{default:a(()=>[e(N,null,{default:a(()=>[e(se,{color:"primary",dark:""},{default:a(()=>[e(m,{icon:"",onClick:d[3]||(d[3]=c=>i.codeEditorDialog=!1)},{default:a(()=>[e(X,null,{default:a(()=>[n("mdi-close")]),_:1})]),_:1}),e(te,null,{default:a(()=>[n("ç¼–è¾‘é…ç½®æ–‡ä»¶")]),_:1}),e(O),e(xe,{style:{display:"flex","align-items":"center"}},{default:a(()=>[e(m,{style:{"margin-left":"16px"},size:"small",onClick:d[4]||(d[4]=c=>k.configToString())},{default:a(()=>[n(b(C.tm("editor.revertCode")),1)]),_:1}),i.config_data_has_changed?(o(),V(m,{key:0,style:{"margin-left":"16px"},size:"small",onClick:d[5]||(d[5]=c=>k.applyStrConfig())},{default:a(()=>[n(b(C.tm("editor.applyConfig")),1)]),_:1})):E("",!0),p("small",il,"ğŸ’¡ "+b(C.tm("editor.applyTip")),1)]),_:1})]),_:1}),e(W,{class:"pa-0"},{default:a(()=>[e(x,{language:"json",theme:"vs-dark",style:{height:"calc(100vh - 64px)"},value:i.config_data_str,"onUpdate:value":d[6]||(d[6]=c=>i.config_data_str=c)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(R,{modelValue:i.configManageDialog,"onUpdate:modelValue":d[10]||(d[10]=c=>i.configManageDialog=c),"max-width":"800px"},{default:a(()=>[e(N,null,{default:a(()=>[e(G,{class:"d-flex align-center justify-space-between"},{default:a(()=>[dl,e(m,{icon:"mdi-close",variant:"text",onClick:d[8]||(d[8]=c=>i.configManageDialog=!1)})]),_:1}),e(W,null,{default:a(()=>[rl,p("div",ul,[e(m,{"prepend-icon":"mdi-plus",onClick:k.startCreateConfig,variant:"tonal",color:"primary"},{default:a(()=>[n(" æ–°å»ºé…ç½®æ–‡ä»¶ ")]),_:1},8,["onClick"])]),e(ke,{lines:"two"},{default:a(()=>[(o(!0),v(P,null,J(i.configInfoList,c=>(o(),V(ie,{key:c.id,title:c.name},ea({_:2},[c.id!=="default"?{name:"append",fn:a(()=>[p("div",cl,[e(m,{icon:"mdi-pencil",size:"small",variant:"text",color:"warning",onClick:t=>k.startEditConfig(c)},null,8,["onClick"]),e(m,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:t=>k.confirmDeleteConfig(c)},null,8,["onClick"])])]),key:"0"}:void 0]),1032,["title"]))),128))]),_:1}),i.showConfigForm?(o(),V(oe,{key:0,class:"my-6"})):E("",!0),i.showConfigForm?(o(),v("div",fl,[p("h3",gl,b(i.isEditingConfig?"ç¼–è¾‘é…ç½®æ–‡ä»¶":"æ–°å»ºé…ç½®æ–‡ä»¶"),1),vl,e(H,{modelValue:i.configFormData.name,"onUpdate:modelValue":d[9]||(d[9]=c=>i.configFormData.name=c),label:"å¡«å†™é…ç½®æ–‡ä»¶åç§°",variant:"outlined",class:"mt-4 mb-4","hide-details":""},null,8,["modelValue"]),p("div",ml,[e(m,{variant:"text",onClick:k.cancelConfigForm},{default:a(()=>[n("å–æ¶ˆ")]),_:1},8,["onClick"]),e(m,{color:"primary",onClick:k.saveConfigForm,disabled:!i.configFormData.name},{default:a(()=>[n(b(i.isEditingConfig?"æ›´æ–°":"åˆ›å»º"),1)]),_:1},8,["onClick","disabled"])])])):E("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Me,{timeout:3e3,elevation:"24",color:i.save_message_success,modelValue:i.save_message_snack,"onUpdate:modelValue":d[11]||(d[11]=c=>i.save_message_snack=c)},{default:a(()=>[n(b(i.save_message),1)]),_:1},8,["color","modelValue"]),e(A,{ref:"wfr"},null,512)],64)}const _l=Q(al,[["render",pl]]),xl=Object.freeze(Object.defineProperty({__proto__:null,default:_l},Symbol.toStringTag,{value:"Module"}));export{el as A,_l as C,xl as a};
