import{u as j,z as y,x as G,o as b,g as D,b as a,w as s,e as f,t as m,f as o,C as g,M as U,N as q,A as C,P as H,al as J,am as L,B as V,E as _,F as k,h as E,a as B,V as x,l as $,d as A,a1 as K,L as O,a2 as Q,ac as X,b5 as z,a5 as Y}from"./index-77b120c5.js";import{W as Z}from"./WaitingForRestart-fc0333aa.js";import{P as ee}from"./ProxySelector-ae3073b0.js";import{g as te,s as w,b as ae,c as se,M as le}from"./MigrationDialog-474503c1.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import"./common-6d6e5a4f.js";import"./ConsoleDisplayer-dd1d5724.js";const ie={style:{"margin-top":"16px"}},ne={class:"text-body-2 mb-4"},re={class:"mb-2 font-weight-medium"},ue={class:"mb-2 font-weight-medium"},me={__name:"SidebarCustomizer",setup(N){const{t:l}=j(),v=y(!1),n=y([]),c=y([]),d=y(null);function p(){const i=te();if(i){const t=new Map;w.forEach(e=>{e.children?e.children.forEach(r=>{t.set(r.title,r)}):t.set(e.title,e)}),n.value=i.mainItems.map(e=>t.get(e)).filter(e=>e),c.value=i.moreItems.map(e=>t.get(e)).filter(e=>e)}else{n.value=w.filter(e=>!e.children);const t=w.find(e=>e.title==="core.navigation.groups.more");c.value=t?[...t.children]:[]}}function h(){p(),v.value=!0}function I(i,t,e){d.value={type:t,index:e,item:t==="main"?n.value[e]:c.value[e]},i.dataTransfer.effectAllowed="move"}function M(i,t,e){if(i.preventDefault(),!d.value)return;const r=d.value.type,u=d.value.index,T=d.value.item;r==="main"?n.value.splice(u,1):c.value.splice(u,1),t==="main"?n.value.splice(e,0,T):c.value.splice(e,0,T),d.value=null}function S(i,t){if(i.preventDefault(),!d.value)return;const e=d.value.type,r=d.value.index,u=d.value.item;e==="main"?n.value.splice(r,1):c.value.splice(r,1),t==="main"?n.value.push(u):c.value.push(u),d.value=null}function F(i){const t=n.value.splice(i,1)[0];c.value.push(t)}function P(i){const t=c.value.splice(i,1)[0];n.value.push(t)}function R(){const i={mainItems:n.value.map(t=>t.title),moreItems:c.value.map(t=>t.title)};ae(i),window.dispatchEvent(new CustomEvent("sidebar-customization-changed")),v.value=!1}function W(){se(),p(),window.dispatchEvent(new CustomEvent("sidebar-customization-changed"))}return G(()=>{p()}),(i,t)=>(b(),D("div",ie,[a(g,{color:"primary",variant:"outlined",size:"small",onClick:h,style:{"margin-bottom":"8px"}},{default:s(()=>[f(m(o(l)("features.settings.sidebar.customize.title")),1)]),_:1}),a(Q,{modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=e=>v.value=e),"max-width":"700px"},{default:s(()=>[a(U,null,{default:s(()=>[a(q,{class:"d-flex justify-space-between align-center"},{default:s(()=>[C("span",null,m(o(l)("features.settings.sidebar.customize.title")),1),a(g,{icon:"mdi-close",variant:"text",onClick:t[0]||(t[0]=e=>v.value=!1)})]),_:1}),a(H,null,{default:s(()=>[C("p",ne,m(o(l)("features.settings.sidebar.customize.subtitle")),1),a(J,null,{default:s(()=>[a(L,{cols:"12",md:"6"},{default:s(()=>[C("div",re,m(o(l)("features.settings.sidebar.customize.mainItems")),1),a(V,{density:"compact",class:"custom-list",onDragover:t[2]||(t[2]=_(()=>{},["prevent"])),onDrop:t[3]||(t[3]=e=>S(e,"main"))},{default:s(()=>[(b(!0),D(k,null,E(n.value,(e,r)=>(b(),B(x,{key:e.title,class:"mb-1 draggable-item",draggable:"true",onDragstart:u=>I(u,"main",r),onDragover:t[1]||(t[1]=_(()=>{},["prevent"])),onDrop:_(u=>M(u,"main",r),["stop"])},{prepend:s(()=>[a($,{icon:e.icon,size:"small",class:"mr-2"},null,8,["icon"])]),append:s(()=>[a(g,{icon:"mdi-arrow-right",variant:"text",size:"x-small",onClick:u=>F(r)},null,8,["onClick"])]),default:s(()=>[a(A,null,{default:s(()=>[f(m(o(l)(e.title)),1)]),_:2},1024)]),_:2},1032,["onDragstart","onDrop"]))),128))]),_:1})]),_:1}),a(L,{cols:"12",md:"6"},{default:s(()=>[C("div",ue,m(o(l)("features.settings.sidebar.customize.moreItems")),1),a(V,{density:"compact",class:"custom-list",onDragover:t[5]||(t[5]=_(()=>{},["prevent"])),onDrop:t[6]||(t[6]=e=>S(e,"more"))},{default:s(()=>[(b(!0),D(k,null,E(c.value,(e,r)=>(b(),B(x,{key:e.title,class:"mb-1 draggable-item",draggable:"true",onDragstart:u=>I(u,"more",r),onDragover:t[4]||(t[4]=_(()=>{},["prevent"])),onDrop:_(u=>M(u,"more",r),["stop"])},{prepend:s(()=>[a($,{icon:e.icon,size:"small",class:"mr-2"},null,8,["icon"])]),append:s(()=>[a(g,{icon:"mdi-arrow-left",variant:"text",size:"x-small",onClick:u=>P(r)},null,8,["onClick"])]),default:s(()=>[a(A,null,{default:s(()=>[f(m(o(l)(e.title)),1)]),_:2},1024)]),_:2},1032,["onDragstart","onDrop"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),a(K,null,{default:s(()=>[a(g,{color:"error",variant:"text",onClick:W},{default:s(()=>[f(m(o(l)("features.settings.sidebar.customize.reset")),1)]),_:1}),a(O),a(g,{color:"primary",onClick:R},{default:s(()=>[f(m(o(l)("core.actions.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},ce=oe(me,[["__scopeId","data-v-8cea203f"]]),de={style:{"background-color":"var(--v-theme-surface, #fff)",padding:"8px","padding-left":"16px","border-radius":"8px","margin-bottom":"16px"}},xe={__name:"Settings",setup(N){const{tm:l}=X("features/settings"),v=y(null),n=y(null),c=()=>{Y.post("/api/stat/restart-core").then(()=>{v.value.check()})},d=async()=>{if(n.value)try{const p=await n.value.open();p.success&&console.log("Migration completed successfully:",p.message)}catch(p){console.error("Migration dialog error:",p)}};return(p,h)=>(b(),D(k,null,[C("div",de,[a(V,{lines:"two"},{default:s(()=>[a(z,null,{default:s(()=>[f(m(o(l)("network.title")),1)]),_:1}),a(x,null,{default:s(()=>[a(ee)]),_:1}),a(z,null,{default:s(()=>[f(m(o(l)("sidebar.title")),1)]),_:1}),a(x,{subtitle:o(l)("sidebar.customize.subtitle"),title:o(l)("sidebar.customize.title")},{default:s(()=>[a(ce)]),_:1},8,["subtitle","title"]),a(z,null,{default:s(()=>[f(m(o(l)("system.title")),1)]),_:1}),a(x,{subtitle:o(l)("system.restart.subtitle"),title:o(l)("system.restart.title")},{default:s(()=>[a(g,{style:{"margin-top":"16px"},color:"error",onClick:c},{default:s(()=>[f(m(o(l)("system.restart.button")),1)]),_:1})]),_:1},8,["subtitle","title"]),a(x,{subtitle:o(l)("system.migration.subtitle"),title:o(l)("system.migration.title")},{default:s(()=>[a(g,{style:{"margin-top":"16px"},color:"primary",onClick:d},{default:s(()=>[f(m(o(l)("system.migration.button")),1)]),_:1})]),_:1},8,["subtitle","title"])]),_:1})]),a(Z,{ref_key:"wfr",ref:v},null,512),a(le,{ref_key:"migrationDialog",ref:n},null,512)],64))}};export{xe as default};
